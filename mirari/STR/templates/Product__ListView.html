{% extends "generic/ListView.html" %} 
{% load static %}
{% load i18n %}
{% load mirari_tags %}

{%block extra_header_menu%}
{%endblock extra_header_menu%}

{%block extra_buttonsList%}
    <form method="get" class="kt-quick-search__form mb-4" v-on:submit.prevent="ProductSubmit" id="FormSubmit">
        <div class="input-group">
            <a href="#" class="btn btn-brand btn-elevate btn-icon-sm mr-4" onclick="var message={action:'GetQR', target:'codebar'}; webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify(message));">
                ESCANEAR CB
            </a>
            <div class="input-group-prepend">
                <span class="input-group-text">
                    <i class="fas fa-barcode"></i>
                </span>
            </div>
            <input type="text" class="form-control kt-quick-search__input" placeholder="CB DEL PRODUCTO" autofocus="autofocus" id="id_codebar" v-model="codebar">
        </div>
    </form>
    
{%endblock extra_buttonsList%}

{%block data%}
    {{ block.super }}
    codebar:'',
{%endblock data%}

{%block methods%}
    {{ block.super }}
    ProductSubmit() {
        setTimeout( function(){
            const { value: formValues } = await Swal.fire({
                title: 'Multiple inputs',
                html:
                    '<input id="swal-input1" class="swal2-input">' +
                    '<input id="swal-input2" class="swal2-input">',
                focusConfirm: false,
                preConfirm: () => {
                    return [
                    document.getElementById('swal-input1').value,
                    document.getElementById('swal-input2').value
                    ]
                }
            })

            if (formValues) {
                Swal.fire(JSON.stringify(formValues))
            }
        }, 1000);
    },
{%endblock methods%}