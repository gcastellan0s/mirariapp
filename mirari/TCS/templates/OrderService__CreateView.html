{% extends "generic/CreateView.html" %}
{% load static %}
{% load i18n %}
{% load mirari_tags %}
{% load crispy_forms_tags %}

{%block extra_styles%}
  <style>
		.m-invoice-2 .m-invoice__wrapper .m-invoice__head .m-invoice__container .m-invoice__items {
      padding: .4rem 0 0rem 0;
    }
	</style>
{%endblock extra_styles%}

{%block content%}
<div class="row">
  <div class="{%if object%}col-xl-9{%else%}col-xl-8 offset-xl-2{%endif%}">
    {% crispy form %}
  </div>
  {%if object%}
    <div class="col-xl-3">
      <div class="col-xl-12">
        <div class="m-portlet">
          <div class="m-portlet__head">
            <div class="m-portlet__head-caption">
              <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">
                  ID: {{object.pk}}
                </h3>
              </div>
            </div>
          </div>
          <div class="m-portlet__body">
            <div class="m-widget3">
              <div class="m-widget3__item">
                <div class="m-widget3__header m--margin-bottom-5">
                  <div class="m-widget3__info">
                    <span class="m-widget3__username">
                      {{object.get_technical_html|safe}}
                    </span>
                  </div>
                </div>
              </div>
              <div class="m-widget3__item">
                <div class="m-widget3__header m--margin-bottom-5">
                  <div class="m-widget3__info">
                    <span class="m-widget3__username">
                      {{object.get_creation_date_html|safe}}
                    </span>
                  </div>
                </div>
              </div>
              <div class="m-widget3__item">
                <div class="m-widget3__header m--margin-bottom-5">
                  <div class="m-widget3__info">
                    <span class="m-widget3__username">
                      <h5 class="m-portlet__head-text">
                        $ TOTAL
                      </h5>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-12">
          <div class="m-portlet m-portlet--last m-portlet--head-lg m-portlet--responsive-mobile" id="">
            <div class="m-portlet__body">
              <div class="m-portlet__body">
                <div class="form-group m-form__group row">
                  <div class="col-md-12">
                    {{form.status}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div class="m-portlet__head m-form__actions m-form__actions--solid">
          <div class="m-portlet__head-wrapper">
              <div class="m-portlet__head-caption">
                  <div class="m-portlet__head-title"> 
                      <a href="#" v-on:click.prevent.self="print_order()" class="btn btn-brand m-btn m-btn--icon m-btn--wide m-btn--md m--margin-right-10">
                      <span> 
                        <i class="la la-print"></i> 
                        <span>IMPRIMIR orden</span> 
                      </span> 
                    </a> 
                  </div>
              </div>
          </div>
        </div>
      </div>
      <div class="col-xl-12">
        <form class="small_form" id="" method="post">
          <div class="m-portlet m-portlet--last m-portlet--head-lg m-portlet--responsive-mobile" id="">
            <div class="m-portlet__body">
              <div class="m-portlet__body">
                <div class="form-group m-form__group row">
                  <div class="col-md-12">
                    <div id="div_id_concept" class="form-group"> 
                      <label for="id_concept" class="col-form-label  requiredField">
                        Concepto 
                      </label>
                      <div class="m-input-icon m-input-icon--left">
                        <input type="text" class="form-control m-input" placeholder="Concepto" id="id_concept">
                        <span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="la la-comments-o"></i></span></span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div id="div_id_quantity" class="form-group"> 
                      <label for="id_quantity" class="col-form-label  requiredField">
                        Cantidad
                      </label>
                      <div class="m-input-icon m-input-icon--left">
                        <input type="text" class="form-control m-input" placeholder="Cantidad" id="id_quantity">
                        <span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="la la-money"></i></span></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="m-portlet__head m-form__actions m-form__actions--solid">
              <div class="m-portlet__head-wrapper">
                  <div class="m-portlet__head-caption">
                      <div class="m-portlet__head-title"> <a href="javascript:history.back(1)" class="btn btn-primary m-btn m-btn--icon m-btn--wide m-btn--md m--margin-right-10">
                        <span> <i class="la la-plus"></i> <span>AGREGAR concepto</span> </span> </a> 
                      </div>
                  </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="col-xl-12">
        <div class="m-portlet m-portlet--full-height">
          <div class="m-portlet__body">
            <div class="m-widget3">
              <div class="m-widget3__item">
                <div class="m-widget3__header">
                  <div class="m-widget3__info">
                    <span class="m-widget3__username">
                    Melania Trump   
                    </span><br> 
                    <span class="m-widget3__time">
                    2 day ago
                    </span>		 
                  </div>
                </div>
                <div class="m-widget3__body">
                  <p class="m-widget3__text"> 
                    Lorem ipsum dolor sit amet,consectetuer edipiscing elit,sed diam nonummy nibh euismod tinciduntut laoreet doloremagna aliquam erat volutpat.
                  </p>
                </div>
              </div>
              <div class="m-widget3__item">
                <div class="m-widget3__header">
                  <div class="m-widget3__info">
                    <span class="m-widget3__username">
                    Melania Trump   
                    </span><br> 
                    <span class="m-widget3__time">
                    2 day ago
                    </span>		 
                  </div>
                </div>
                <div class="m-widget3__body">
                  <p class="m-widget3__text"> 
                    Lorem ipsum dolor sit amet,consectetuer edipiscing elit,sed diam nonummy nibh euismod tinciduntut laoreet doloremagna aliquam erat volutpat.
                  </p>
                </div>
              </div>
            </div>
            <div id="" class="form-group">
              <label for="id_comment" class="col-form-label">
                <small>(Escribe un comentario)</small>
              </label> 
              <textarea name="comment" cols="40" rows="10" id="id_comment" class="textarea form-control"></textarea>
            </div>
          </div>
          <div class="m-portlet__head m-form__actions m-form__actions--solid">
            <div class="m-portlet__head-wrapper">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title"> <a href="javascript:history.back(1)" class="btn btn-primary m-btn m-btn--icon m-btn--wide m-btn--md m--margin-right-10">
                      <span> <i class="la la-plus"></i> <span>ENVIAR COMENTARIO</span> </span> </a> 
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  {%endif%}
</div>


<div class="row m--hide">
  <div class="col-lg-12">
    <div class="m-portlet">
      <div class="m-portlet__body m-portlet__body--no-padding">
        <div id="print_order">
          <div class="m-invoice-2">
            <div class="m-invoice__wrapper">
              <div class="m-invoice__head">
                <div class="m-invoice__container m-invoice__container--centered">
                  <div class="m-invoice__logo">
                    <a href="#" style="text-align: center;color: inherit;">
                      <img src="{%static 'metronic/dist/demo5/assets/app/media/img//logos/logo_client_color.png'%}">
                      <br />
                      <span>Tel. 01800 6819542</span><br />
                    </a>
                    <a href="#" style="text-align: center;color: inherit;">
                      <img src="{%static 'metronic/dist/demo5/assets/app/media/img//logos/logo_client_color.png'%}">
                      <br />
                      <span>www.caminadorasygimnasios.com</span><br />
                      <span>servicio@caminadorasygimnasios.com</span><br />
                      <span>Tel.55134050/56014868</span><br />
                    </a>
                    <span class="m-invoice__desc">
                      <span>FOLIO: <strong>{{object.pk}}</strong></span>
                    </span>
                    <a href="#">
                    </a>
                    <span class="m-invoice__desc">
                      <span>ALTA: <strong>{{object.creation_date|date:"SHORT_DATETIME_FORMAT"}}</strong></span>
                      <span>TIPO: <strong>{{object.service}}</strong></span>
                      <span>TOTAL: <strong></strong></span>
                      <span>OPERADOR: <strong>{{object.user}}</strong></span>
                      <span>TÉCNICO: <strong>{{object.technical}}</strong></span>
                    </span>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">EMAIL</span>
                      <span class="m-invoice__text">{{object.email|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TELÉFONO</span>
                      {%if contact_phone1 or contact_phone2%}
                        <span class="m-invoice__text">{{object.contact_phone1}} {{object.contact_phone2}}</span>
                      {%else%}
                        <span class="m-invoice__text">-</span>
                      {%endif%}
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">CLIENTE</span>
                      <span class="m-invoice__text">{{object.client_name|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">COMENTARIOS</span>
                      <span class="m-invoice__text">{{object.client_notes|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA COMPRA</span>
                      <span class="m-invoice__text">{{object.buy_date|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA ENTREGA</span>
                      <span class="m-invoice__text">{{object.delivery_date|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">EMPRESA</span>
                      <span class="m-invoice__text">{{object.company|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TIENDA</span>
                      <span class="m-invoice__text">{{object.store|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">MARCA</span>
                      <span class="m-invoice__text">{{object.brand|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">MODELO</span>
                      <span class="m-invoice__text">{{object.modelo|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">NO SERIE</span>
                      <span class="m-invoice__text">{{object.serial_number|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">REPORTA</span>
                      <span class="m-invoice__text">{{object.report_name|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TECNICO</span>
                      <span class="m-invoice__text">{{object.technical|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FIRMA</span>
                      <span class="m-invoice__text"></span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA</span>
                      <span class="m-invoice__text">{{object.service_date}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="m-invoice-2">
            <div class="m-invoice__wrapper">
              <div class="m-invoice__head">
                <div class="m-invoice__container m-invoice__container--centered">
                  <div class="m-invoice__logo">
                    <a href="#" style="text-align: center;color: inherit;">
                      <img src="{%static 'metronic/dist/demo5/assets/app/media/img//logos/logo_client_color.png'%}">
                      <br />
                      <span>Tel. 01800 6819542</span><br />
                    </a>
                    <a href="#" style="text-align: center;color: inherit;">
                      <img src="{%static 'metronic/dist/demo5/assets/app/media/img//logos/logo_client_color.png'%}">
                      <br />
                      <span>www.caminadorasygimnasios.com</span><br />
                      <span>servicio@caminadorasygimnasios.com</span><br />
                      <span>Tel.55134050/56014868</span><br />
                    </a>
                    <span class="m-invoice__desc">
                      <span>FOLIO: <strong>{{object.pk}}</strong></span>
                    </span>
                    <a href="#">
                    </a>
                    <span class="m-invoice__desc">
                      <span>ALTA: <strong>{{object.creation_date|date:"SHORT_DATETIME_FORMAT"}}</strong></span>
                      <span>TIPO: <strong>{{object.service}}</strong></span>
                      <span>TOTAL: <strong></strong></span>
                      <span>OPERADOR: <strong>{{object.user}}</strong></span>
                      <span>TÉCNICO: <strong>{{object.technical}}</strong></span>
                    </span>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">EMAIL</span>
                      <span class="m-invoice__text">{{object.email|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TELÉFONO</span>
                      {%if contact_phone1 or contact_phone2%}
                        <span class="m-invoice__text">{{object.contact_phone1}} {{object.contact_phone2}}</span>
                      {%else%}
                        <span class="m-invoice__text">-</span>
                      {%endif%}
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">CLIENTE</span>
                      <span class="m-invoice__text">{{object.client_name|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">COMENTARIOS</span>
                      <span class="m-invoice__text">{{object.client_notes|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA COMPRA</span>
                      <span class="m-invoice__text">{{object.buy_date|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA ENTREGA</span>
                      <span class="m-invoice__text">{{object.delivery_date|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">EMPRESA</span>
                      <span class="m-invoice__text">{{object.company|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TIENDA</span>
                      <span class="m-invoice__text">{{object.store|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">MARCA</span>
                      <span class="m-invoice__text">{{object.brand|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">MODELO</span>
                      <span class="m-invoice__text">{{object.modelo|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">NO SERIE</span>
                      <span class="m-invoice__text">{{object.serial_number|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">REPORTA</span>
                      <span class="m-invoice__text">{{object.report_name|default:'-'}}</span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">TECNICO</span>
                      <span class="m-invoice__text">{{object.technical|default:'-'}}</span>
                    </div>
                  </div>
                  <div class="m-invoice__items">
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FIRMA</span>
                      <span class="m-invoice__text"></span>
                    </div>
                    <div class="m-invoice__item">
                      <span class="m-invoice__subtitle">FECHA</span>
                      <span class="m-invoice__text">{{object.service_date}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{%endblock content%}

{%block js%}
  {{block.super}}
  <script src="{%static 'mirari/js/print.js'%}" type="text/javascript"></script>
{%endblock js%}

{%block methods%}
  print_order: function (){
    const d = new window.printd.Printd()
    const cssText = `
        {% include "includes/sellpoint_vendor_styleticket.html" %}
    `
    d.print( document.getElementById('print_order'), cssText)
  },
{%endblock methods%}