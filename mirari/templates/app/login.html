{% extends "appwork/layout-1.html" %} 
{% load static %}
{% load i18n %}

{%block styles%} 
  {{block.super}} 
  <link rel="stylesheet" href="{%static 'appwork-html/vendor/css/pages/authentication.css'%}">
{%endblock styles%}

{%block content%}
  <div class="authentication-wrapper authentication-1 px-4">
    <div class="authentication-inner py-5">
      <div class="d-flex justify-content-center align-items-center">
        <div class="ui-w-60">
          <div class="w-100 position-relative" style="padding-bottom: 54%"></div>
        </div>
        <img src="{{G.MEDIA}}{{ G.ORGANIZATION.LOGO_BG }}" style="max-width: 300px;">
      </div>
      <form class="my-5" v-on:submit.prevent="login(credentials)">
        <div class="form-group">
          <label class="form-label">{% trans "Usuario o Email"%}</label>
          <input type="text" class="form-control" v-model="credentials.username">
        </div>
        <div class="form-group">
          <label class="form-label d-flex justify-content-between align-items-end">
            <div>Contraseña</div>
            <a href="javascript:void(0)" class="d-block small">{% trans "Olvidaste tu contraseña?"%}</a>
          </label>
          <input type="password" class="form-control" v-model="credentials.password">
        </div>
        <div class="d-flex justify-content-between align-items-center m-0">
          <label class="custom-control custom-checkbox m-0">
            <input type="checkbox" class="custom-control-input">
            <span class="custom-control-label">{% trans "Recuerdame"%}</span>
          </label>
          <button type="submit" class="btn btn-primary">{% trans "Entrar"%}</button>
        </div>
      </form>
      <div class="text-center text-muted">
        {% trans "Aun no tienes una cuenta?"%}
        <a href="javascript:void(0)">{% trans "Registrate"%}</a>
      </div>
    </div>
  </div>
{%endblock content%}

{%block data%}
  credentials: {
    username: '',
    password: '',
    code: '{{ G.ORGANIZATION.code }}',
  },
{%endblock data%}

{%block methods%}
  login: function (credentials) {
    Block();
    Ax('post', '', credentials).then(function(json){
      if (!json.data.message)
        null
      else 
        swal('Error!', json.data.message, 'error') 
      UnBlock();
    })
  },
{%endblock methods%}